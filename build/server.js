!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=27)}([function(t,e){t.exports=require("react")},function(t,e){t.exports=require("@babel/runtime/regenerator")},function(t,e){t.exports=require("@babel/runtime/helpers/classCallCheck")},function(t,e){t.exports=require("@babel/runtime/helpers/createClass")},function(t,e){t.exports=require("@babel/runtime/helpers/possibleConstructorReturn")},function(t,e){t.exports=require("@babel/runtime/helpers/getPrototypeOf")},function(t,e){t.exports=require("@babel/runtime/helpers/inherits")},function(t,e){t.exports=require("@babel/runtime/helpers/asyncToGenerator")},function(t,e){t.exports=require("redux")},function(t,e){t.exports=require("@babel/runtime/helpers/objectSpread")},function(t,e){t.exports=require("react-redux")},function(t,e){t.exports=require("react-router-config")},function(t,e){t.exports=require("express")},function(t,e){t.exports=require("redux-thunk")},function(t,e){t.exports=require("prop-types")},function(t,e,n){var r=n(21),i=n(23);"string"==typeof r&&(r=[[t.i,r,""]]),t.exports=r.locals||{},t.exports._getContent=function(){return r},t.exports._getCss=function(){return r.toString()},t.exports._insertCss=function(t){return i(r,t)}},function(t,e){t.exports=require("react-dom/server")},function(t,e){t.exports=require("react-router")},function(t,e){t.exports=require("html-minifier")},function(t,e,n){(function(t){var r=n(26);e.resolve=function(e){return r.resolve(t,"..",e)}}).call(this,"/")},function(t,e){t.exports=require("fs")},function(t,e,n){(e=t.exports=n(22)(!1)).push([t.i,".section--37EfJ {\n  background-color: aqua; }\n",""]),e.locals={section:"section--37EfJ"}},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var i=function(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}(r),o=r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"});return[n].concat(o).concat([i]).join("\n")}return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<t.length;i++){var s=t[i];"number"==typeof s[0]&&r[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),e.push(s))}},e}},function(t,e,n){"use strict";var r=o(n(24)),i=o(n(25));function o(t){return t&&t.__esModule?t:{default:t}}var s="s",a={};function c(t){return btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode("0x"+e)}))}t.exports=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.replace,o=void 0!==n&&n,u=e.prepend,l=void 0!==u&&u,p=[],f=0;f<t.length;f++){var h=(0,i.default)(t[f],4),d=h[0],m=h[1],v=h[2],y=h[3],b=d+"-"+f;if(p.push(b),!a[b]||o){a[b]=1;var x=document.getElementById(s+b),g=!1;x||(g=!0,(x=document.createElement("style")).setAttribute("type","text/css"),x.id=s+b,v&&x.setAttribute("media",v));var S=m;y&&"function"==typeof btoa&&(S+="\n/*# sourceMappingURL=data:application/json;base64,"+c((0,r.default)(y))+"*/",S+="\n/*# sourceURL="+y.file+"?"+b+"*/"),"textContent"in x?x.textContent=S:x.styleSheet.cssText=S,g&&(l?document.head.insertBefore(x,document.head.childNodes[0]):document.head.appendChild(x))}else a[b]++}return function(t){t.forEach(function(t){if(--a[t]<=0){var e=document.getElementById(s+t);e&&e.parentNode.removeChild(e)}})}.bind(null,p)}},function(t,e){t.exports=require("babel-runtime/core-js/json/stringify")},function(t,e){t.exports=require("babel-runtime/helpers/slicedToArray")},function(t,e){t.exports=require("path")},function(t,e,n){"use strict";n.r(e);var r=n(12),i=n.n(r),o=n(9),s=n.n(o),a=n(1),c=n.n(a),u=n(7),l=n.n(u),p=n(2),f=n.n(p),h=n(3),d=n.n(h),m=(n(20),n(0)),v=n.n(m),y=n(16),b=n(17),x=n(10),g=n(11),S=n(18),E=n(13),C=n.n(E),O=n(8),w=function(){return function(){var t=l()(c.a.mark(function t(e){var n;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise(function(t){setTimeout(function(){t([{title:"周一新闻"},{title:"周二新闻"},{title:"周三新闻"},{title:"周四新闻"}])},100)});case 2:n=t.sent,e({type:T,payload:n});case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},T="GET_NEWS_LIST",L={newsList:[]},j=Object(O.combineReducers)({home:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,e=arguments.length>1?arguments[1]:void 0,n=e.type,r=e.payload;switch(n){case T:return s()({},t,{newsList:r});default:return t}}}),k=function(){return Object(O.createStore)(j,Object(O.applyMiddleware)(C.a))},R=n(4),q=n.n(R),_=n(5),P=n.n(_),N=n(6),U=n.n(N),M=function(t){function e(){return f()(this,e),q()(this,P()(e).apply(this,arguments))}return U()(e,t),d()(e,[{key:"render",value:function(){return v.a.createElement("div",null,"404 Not Found")}}]),e}(m.Component),A=n(14),I=n.n(A),D={getNewsList:w},B=Object(x.connect)(function(t){return{newsList:t.home.newsList}},D),H=n(15),J=n.n(H),V=function(t){function e(){return f()(this,e),q()(this,P()(e).apply(this,arguments))}return U()(e,t),d()(e,[{key:"componentDidMount",value:function(){(0,this.props.getNewsList)()}},{key:"renderNewsList",value:function(){return this.props.newsList.map(function(t){var e=t.title;return v.a.createElement("div",{key:e},e)})}},{key:"render",value:function(){var t=this.renderNewsList();return v.a.createElement("section",{className:J.a.section},t,v.a.createElement("div",null,"主页",v.a.createElement("button",{onClick:function(){console.log("~主页~")}},"点我点我~")))}}],[{key:"loadData",value:function(){var t=l()(c.a.mark(function t(e){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.dispatch(w());case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}]),e}(m.Component);V.propTypes={newsList:I.a.array,getNewsList:I.a.func};var F=B(function(t,e){return function(n){function r(t){var n;f()(this,r),n=q()(this,P()(r).call(this,t));var i=t.staticContext;return i&&i.cssList.push(e._getCss()),n}return U()(r,n),d()(r,[{key:"render",value:function(){return v.a.createElement(t,this.props)}}]),r}(t)}(V,J.a)),W=function(t){function e(){return f()(this,e),q()(this,P()(e).apply(this,arguments))}return U()(e,t),d()(e,[{key:"render",value:function(){return v.a.createElement("div",null,"ABOUT",v.a.createElement("button",{onClick:function(){console.log("ABOUT")}},"ABOUT"))}}]),e}(m.Component),G=[{path:"/",component:F,exact:!0,key:"home",loadData:F.loadData},{path:"/home",component:F,exact:!0,key:"home",loadData:F.loadData},{path:"/about",component:W,exact:!0,key:"about"},{component:M,key:"404"}],Q=function(){return v.a.createElement("div",null,Object(g.renderRoutes)(G))},X=process.env,Y=X.CLIENT_PORT,z=X.ENV,K=X.LIVERELOAD_PORT,Z=function(){function t(e,n){f()(this,t),this.req=e,this.res=n,this.path=e.path,this.store=k(),this.matchedRoutesPromises=[],this.content="",this.initialState={},this.initialStateStr="",this.context={cssList:[]},this.htmlStr="",this.styleStr="",this.scriptUrl="","PRODUCTION"===z&&console.log(this.scriptUrl)}return d()(t,[{key:"initialStore",value:function(){var t=l()(c.a.mark(function t(){var e,n=this;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=[];try{e=Object(g.matchRoutes)(G,this.path)}catch(t){e=[]}return e.forEach(function(t){var e=t.route.loadData;e&&n.matchedRoutesPromises.push(e(n.store))}),t.next=5,Promise.all(this.matchedRoutesPromises);case 5:this.initialState=this.store.getState(),this.initialStateStr=JSON.stringify(this.initialState);case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"initialContent",value:function(){this.content=Object(y.renderToString)(v.a.createElement(x.Provider,{store:this.store},v.a.createElement(b.StaticRouter,{location:this.path,context:this.context},v.a.createElement(Q,null))))}},{key:"initialStyle",value:function(){var t=this.context.cssList;this.styleStr=t.join("")}},{key:"minifyHTML",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(S.minify)(t,s()({removeAttributeQuotes:!0,collapseWhitespace:!0,collapseInlineTagWhitespace:!0,minifyCSS:!0},e))}},{key:"getRenderHTML",value:function(){var t=this.scriptUrl,e="";"DEVELOPMENT"===z&&(t="http://localhost:".concat(Y||9099,"/dev-client-script.js"),e='<script src="http://localhost:'.concat(K||35729,'/livereload.js"><\/script>'));var n='\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <meta charset="UTF-8">\n        <meta name="viewport" content="width=device-width, initial-scale=1.0">\n        <meta http-equiv="X-UA-Compatible" content="ie=edge">\n        <title>Charley SSR</title>\n        <style>'.concat(this.styleStr,"</style>\n        <script>\n          window.__INITIAL_STATE__ = ").concat(this.initialStateStr,'\n        <\/script>\n      </head>\n      <body>\n        <div id="root">').concat(this.content,"</div>\n        ").concat(e,'\n        <script src="').concat(t,'"><\/script>\n      </body>\n      </html>\n    ');this.htmlStr=this.minifyHTML(n)}},{key:"render",value:function(){var t=l()(c.a.mark(function t(e){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.initialStore();case 2:this.initialContent(),this.initialStyle(),this.getRenderHTML(e),this.res.send(this.htmlStr);case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}]),t}(),$=n(19),tt=process.env.SERVER_PORT,et=i()();et.use(i.a.static(Object($.resolve)("static"))),et.get("*",function(t,e){new Z(t,e).render()}),et.listen(tt||9527,function(){console.log("SSR 服务已启动，正在监听 ".concat(tt||9527," 端口"))})}]);